#ifndef JOYSTICK_H
#define JOYSTICK_H

////////////////////////////////////////////////////////////////////////////////
// Includes
////////////////////////////////////////////////////////////////////////////////

#include "adc.h"
#include <avr/io.h>
#include <stdint.h>

////////////////////////////////////////////////////////////////////////////////
// Defines
////////////////////////////////////////////////////////////////////////////////

#define JOY_X_CH ADC_CH1
#define JOY_Y_CH ADC_CH2
#define JOY_BTN PB3

#define THRESHOLD_UP 90
#define THRESHOLD_DOWN 10
#define THRESHOLD_LEFT 10
#define THRESHOLD_RIGHT 90

////////////////////////////////////////////////////////////////////////////////
// Structs
////////////////////////////////////////////////////////////////////////////////

typedef struct pos {
    uint8_t x;
    uint8_t y;
} pos_t;

////////////////////////////////////////////////////////////////////////////////
// Enums
////////////////////////////////////////////////////////////////////////////////

typedef enum joy_btn_dir {
    LEFT,
    RIGHT,
    UP,
    DOWN,
    NEUTRAL
} joy_btn_dir_t;

////////////////////////////////////////////////////////////////////////////////
// Function declarations
////////////////////////////////////////////////////////////////////////////////

void joystick_init();

pos_t joystick_read_x_and_y_raw();
pos_t joystick_get_position();
joy_btn_dir_t joystick_get_direction();
uint8_t joystick_read_btn();

#if COMPILE_JOYSTICK_TEST
void joystick_test();
#endif // COMPILE_JOYSTICK_TEST

#endif // JOYSTICK_h