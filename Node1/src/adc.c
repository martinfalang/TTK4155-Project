
////////////////////////////////////////////////////////////////////////////////
// Includes
////////////////////////////////////////////////////////////////////////////////

#include "adc.h"

////////////////////////////////////////////////////////////////////////////////
// Global variables
////////////////////////////////////////////////////////////////////////////////

volatile uint8_t *adc = (uint8_t *) ADC_BASE;

////////////////////////////////////////////////////////////////////////////////
// Public functions
////////////////////////////////////////////////////////////////////////////////

void adc_init() {

    // Setting Pin D2 (INTR) to input
    DDRD &= ~(1 << DDD2);
    // Enable pull up resistor
    PORTD |= (1 << PD2);
}

uint8_t adc_read(adc_channel_t channel) {
   
    *adc = channel;

    while (PIND & (1<<PD2));
    
    return *adc;
}
